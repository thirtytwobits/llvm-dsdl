# RUN: %dsdlc --help 2>&1 | FileCheck %s --check-prefix=HELP
# RUN: not %dsdlc %S/fixtures 2>&1 | FileCheck %s --check-prefix=MISSING_LANGUAGE
# RUN: not %dsdlc --target-language unknown %S/fixtures 2>&1 | FileCheck %s --check-prefix=BAD_LANGUAGE
# RUN: not %dsdlc --target-language ast --unknown %S/fixtures 2>&1 | FileCheck %s --check-prefix=UNKNOWN_ARG
# RUN: not %dsdlc --target-language ast --no-target-namespaces %S/fixtures 2>&1 | FileCheck %s --check-prefix=NO_TARGET_NAMESPACES
# RUN: not %dsdlc --target-language ast %S/does-not-exist 2>&1 | FileCheck %s --check-prefix=BAD_TARGET
# RUN: not %dsdlc --target-language cpp --cpp-profile not-a-profile %S/fixtures --outdir %t 2>&1 | FileCheck %s --check-prefix=BAD_CPP_PROFILE
# RUN: not %dsdlc --target-language c --py-package bad %S/fixtures 2>&1 | FileCheck %s --check-prefix=GATED_PY
# RUN: not %dsdlc --target-language cpp --cpp-profile 2>&1 | FileCheck %s --check-prefix=MISSING_VALUE_CPP
# RUN: %dsdlc --target-language ast %S/fixtures 2>&1 | FileCheck %s --check-prefix=SUMMARY

# HELP: SYNOPSIS
# HELP: dsdlc --target-language <lang> [options] [target_files_or_root_namespace ...]
# HELP: --no-target-namespaces
# HELP: --lookup-dir, -I <dir>
# HELP: --outdir, -O <dir>
# HELP: --allow-unregulated-fixed-port-id
# HELP: --list-inputs
# HELP: --list-outputs

# MISSING_LANGUAGE: --target-language is required
# MISSING_LANGUAGE: Usage: dsdlc --target-language <ast|mlir|c|cpp|rust|go|ts|python> [options] [target_files_or_root_namespace ...]

# BAD_LANGUAGE: unknown --target-language value: unknown

# UNKNOWN_ARG: unknown argument: --unknown

# NO_TARGET_NAMESPACES: root directory cannot be a folder (--no-target-namespaces):

# BAD_TARGET: error: target path does not exist:

# BAD_CPP_PROFILE: invalid --cpp-profile value: not-a-profile
# BAD_CPP_PROFILE: Usage: dsdlc --target-language <ast|mlir|c|cpp|rust|go|ts|python> [options] [target_files_or_root_namespace ...]

# GATED_PY: --py-* is only valid when --target-language is 'python'

# MISSING_VALUE_CPP: missing value for --cpp-profile
# MISSING_VALUE_CPP: Usage: dsdlc --target-language <ast|mlir|c|cpp|rust|go|ts|python> [options] [target_files_or_root_namespace ...]

# SUMMARY: Run summary:
# SUMMARY: command: ast
# SUMMARY: output root: stdout
# SUMMARY: files generated: 0
# SUMMARY: elapsed:
