# Complex DSDL Benchmark Corpus

This directory contains a synthetic, large-scale DSDL corpus intended to stress
`llvm-dsdl` with a realistic civilian autonomous aerial-survey system model.

The corpus is organized under the root namespace `civildrone` and includes:

- many subsystem namespaces (airframe, navigation, perception, survey, etc.)
- message, union, and service types per subsystem
- deep cross-namespace references
- heavy reuse of `uavcan` regulated data types
- synthetic chained composite/variant workload families to amplify graph complexity
- deep vision stack coverage:
  - low-level camera/gimbal/optics/ISP control channels and services
  - video transport/codec/packetizer/depacketizer/streaming control flows
  - CV/ML pipelines (features, detections, classifications, tensors, graph state)
  - VSLAM/localization/mapping/fusion/planner/scenegraph style type graphs

Current generated size is intentionally large (thousands of `.dsdl` files) to
surface combinatorial behavior in discovery, parsing, semantic analysis, and
downstream lowering/codegen passes.

Benchmark runs should use:

- `test/benchmark/complex/civildrone`
- `--lookup-dir submodules/public_regulated_data_types/uavcan`

## Regeneration

The corpus is generated by:

`test/benchmark/complex/generate_complex_dsdl.sh`

Run from repository root:

```bash
bash test/benchmark/complex/generate_complex_dsdl.sh
```

You can scale the synthetic workload further via environment variables:

```bash
CLASSIC_WORKLOAD_COUNT=800 \
VISION_WORKLOAD_COUNT=1000 \
MEGABUNDLE_COUNT=320 \
bash test/benchmark/complex/generate_complex_dsdl.sh
```

## Suggested sanity check

```bash
cmake --build --preset build-dev-homebrew-debug --target dsdlc
build/matrix/dev-homebrew/tools/dsdlc/Debug/dsdlc --target-language ast \
  test/benchmark/complex/civildrone \
  --lookup-dir submodules/public_regulated_data_types/uavcan >/dev/null
```
